<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Alexchihir'blog - 副标题</title><meta name="keywords" content="网络安全"><meta name="author" content="Alexhirchi"><meta name="copyright" content="Alexhirchi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="月亮与六便士">
<meta property="og:type" content="website">
<meta property="og:title" content="Alexchihir&#39;blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Alexchihir&#39;blog">
<meta property="og:description" content="月亮与六便士">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/show/test.jpg">
<meta property="article:author" content="Alexhirchi">
<meta property="article:tag" content="网络安全">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/show/test.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-05-26 08:13:44'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Alexchihir'blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/show/test.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Alexchihir'blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Alexchihir'blog</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/25/tag/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87/" title="浏览器解析与编码绕过">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="浏览器解析与编码绕过"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/25/tag/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87/" title="浏览器解析与编码绕过">浏览器解析与编码绕过</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-24T22:00:00.000Z" title="发表于 2021-05-24 22:00:00">2021-05-24</time></span></div><div class="content">浏览器解析与编码绕过0x00 前言之前对于编码绕过并没有做过了解，于是每次测试都是先每种编码都试一试，各种绕过payload放进去碰碰运气。直到最近打国赛，因为对编码绕过没有系统认识导致没做出来。于是开始思考，浏览器到底是如果解析编码问题的？
0x01 浏览器解析首先了解数据包处理过程：
1、在浏览器的地址栏中输入url，发送 http 请求头和数据
2、数据包通过网络传输到达远程web服务器，服务器接收到url，分析请求头，根据它找到对应资源，经过后端代码进行处理（过滤，校验），然后给前端返回响应头和数据。
3、浏览器接收到响应的数据后，对数据进行解析（这里是我们要关注的地方）
浏览器解析分为三步：
（1）HTML 解析（HTML解析器）
（2） JS 解析（JavaScript解析器）
（3） URL 解析（URL解析器）
将解析流程再具体点就是：
步骤一：浏览器接收到响应数据，HTML解析器先对HTML的文档进行解析，将HTML标签转化构建成DOM节点树，同时CSS会被CSS解析器解析生成样式表。

步骤二：在解析HTML标签过程中，当遇到&lt;script&gt;标签（或触发 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/24/tag/apache%20Tomcat%20%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E(CVE-2020-1938)/" title="apache Tomcat 文件包含漏洞（CVE-2020-1938）">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="apache Tomcat 文件包含漏洞（CVE-2020-1938）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/24/tag/apache%20Tomcat%20%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E(CVE-2020-1938)/" title="apache Tomcat 文件包含漏洞（CVE-2020-1938）">apache Tomcat 文件包含漏洞（CVE-2020-1938）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-23T22:00:00.000Z" title="发表于 2021-05-23 22:00:00">2021-05-23</time></span></div><div class="content">apache Tomcat 文件包含漏洞（CVE-2020-1938）漏洞描述漏洞编号：CVE-2020-1938
漏洞简介：由于Tomcat AJP协议存在缺陷而导致，攻击者利用该漏洞可通过构造特定参数，读取服务器webapp下的任意文件。若目标服务器同时存在文件上传功能，攻击者可利用文件包含进一步实现远程代码执行。
影响范围：
受影响版本

Apache Tomcat 6
Apache Tomcat 7 &lt; 7.0.100
Apache Tomcat 8 &lt; 8.5.51
Apache Tomcat 9 &lt; 9.0.31

不受影响版本

Apache Tomcat = 7.0.100
Apache Tomcat = 8.5.51
Apache Tomcat = 9.0.31

0x01漏洞复现使用Poc：https://github.com/YDHCUI/CNVD-2020-10487-Tomcat-Ajp-lfi
payload：
1python2 CNVD-2020-10487-Tomcat-Ajp-lfi.py 目标IP -p 8009 -f &#x2F; ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/17/tag/phpmyadmin%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0(CVE-2018-12613)/" title="phpmyadmin文件包含漏洞复现（CVE-2018-12613）">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="phpmyadmin文件包含漏洞复现（CVE-2018-12613）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/17/tag/phpmyadmin%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0(CVE-2018-12613)/" title="phpmyadmin文件包含漏洞复现（CVE-2018-12613）">phpmyadmin文件包含漏洞复现（CVE-2018-12613）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-16T22:00:00.000Z" title="发表于 2021-05-16 22:00:00">2021-05-16</time></span></div><div class="content">phpmyadmin文件包含漏洞复现（CVE-2018-12613）0x01 漏洞描述漏洞编号：CVE-2018-12613
漏洞简介：phpMyAdmin 是一套开源的、基于Web的 MySQL数据库管理工具。其 index.php 中存在一处文件包含逻辑，通过二次编码可以绕过检查，造成任意文件包含漏洞，可获取 webshell。
影响范围：phpmyadmin 4.8.0-4.8.2
运行环境：winodws+phpstudy集成环境
0x02 漏洞复现需要先登录 phpmyadmin 并访问主页
执行payload： index.php?target=db_datadict.php%253f/../../../../../Windows/system.ini
返回如下信息，成功执行文件包含

0x03 漏洞细节该漏洞主要问题出现在 index.php 55-63行处，代码审计可知：

通过 include() 包含 target 参数
利用正则限制 target参数不能存在index
限制target为非 back_list 参数值（黑名单是一切骚操作的开始）
自定义函数 che ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/04/30/Blue/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="工具使用">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="工具使用"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/30/Blue/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="工具使用">工具使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/blue/">blue</a></span></div><div class="content">工具使用nmap功能

发现主机
扫描端口
路由追踪

常用参数
123456789101112发现主机-sP(Ping扫描) 只进行主机发现，不进行端口扫描，降低被发现-sL 仅将指定的目标的IP列举出来，不进行主机发现(比如列出网段下的IP)端口扫描路由跟踪-traceroute输出结果-vv 对结果进行详细输出





基础操作
(1)发现主机  -sP
1nmap -sP IP&#x2F;CIDR   nmap -sP
</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" title="命令执行代码执行">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="命令执行代码执行"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" title="命令执行代码执行">命令执行代码执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Red/">Red</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/">常见web漏洞</a></span></div><div class="content">RCE概述：RCE（remote command/code execute）

分为远程命令执行和远程代码执行

区别

命令执行：调用操作系统命令进行执行

代码执行：调用服务器网站代码进行执行


命令执行常见危险函数PHP
system
exec
passthru
shell_exec
popen
proc_open

Python
system
popen
subprocess.call
spawn

Java
java.lang.Runtime.getRuntime().exec(command)

常见注入方式通过命令分隔符和系统命令执行

;  &amp;  &amp;&amp; ||分割
| 管道符
\r\n %d0%a0 换行
反单引号解析
$() 替换

命令分隔符
12345678910linux中：%0a 、%0d 、; 、&amp; 、| 、&amp;&amp;、||windows中：%0a、&amp;、|、%1a（一个神奇的角色，作为.bat文件中的命令分隔符）; 连续指令。命令按照顺序（从左到右）被执行，可以用多个分号进行分隔。有命令执行失败时，不会中断其 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/04/30/Blue/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/" title="日志分析">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="日志分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/30/Blue/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/" title="日志分析">日志分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/blue/">blue</a></span></div><div class="content">日志分析概述：将主机系统安全日志/操作日志、网络设备流量日志、Web应用访问日志、SQL应用访问日志等日志集中到一个统一的后台，在后台中对各类日志进行综合的分析。
目的
（1）网站安全自检查，了解服务器上正在发生的安全事件。
（2）应急事件中的分析取证。
系统日志Windows简介：Windows系统日志是记录系统中硬件、软件和系统问题的信息，同时还可以监视系统中发生的事件。用户可以通过它来检查错误发生的原因，或者寻找受到攻击时攻击者留下的痕迹。
常用日志Windows主要三类日志记录系统事件

应用程序日志
系统日志
安全日志

系统日志
记录操作系统组件产生的事件，主要包括驱动程序、系统组件和应用软件的崩溃以及数据丢失错误等。系统日志中记录的时间类型由Windows NT/2000操作系统预先定义。
1默认位置： %SystemRoot%\System32\Winevt\Logs\System.evtx



应用程序日志
记录由应用程序或系统程序产生的事件，主要记录程序运行方面的事件，例如数据库程序文件错误，程序开发人员可以自行决定监视哪些事件。
1默认位置：%SystemRoo ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" title="文件上传">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文件上传"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" title="文件上传">文件上传</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Red/">Red</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/">常见web漏洞</a></span></div><div class="content">文件上传漏洞概述：对用户文件上传的控制不足或者处理缺陷，导致用户可以越过本身权限向服务器上传可执行的动态脚本文件。“文件上传”功能本身没有问题，有问题的是文件上传后，后端服务器如何处理、解释文件。
文件上传攻击的演变
客户端

前端 JS 校验


服务端

文件后缀校验
文件类型校验
文件内容校验
自定义规则校验



==================
文件上传测试点 -图片
===================
客户端校验（前端）JavaScript检查​    方法1：浏览器禁js
​    方法2：burp抓包 先上传白名单文件，再用burp修改上传文件后缀（一句话木马）
服务端校验（后端）文件后缀校验黑名单

大小写绕过
非黑名单列表爆破
特殊文件名绕过
0x00截断绕过
配合解析漏洞
双写绕过

白名单

0x00截断绕过
解析漏洞绕过（1.php.jpg）
.htaccess文件修改配置

黑名单：寻找漏网之鱼
1234567891011121314151617181920212223-------------------------------------(1)文 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E6%B3%A8%E5%85%A5/" title="注入">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="注入"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E6%B3%A8%E5%85%A5/" title="注入">注入</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Red/">Red</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/">常见web漏洞</a></span></div><div class="content">SQL注入概述：web应用程序对用户输入数据控制不严格，导致用户输入数据被拼接到SQL语句中被数据库执行导致的安全问题。
注入分类按注入方式分类

联合注入：需要内容显示位。

报错注入：返回error信息。双查询注入、函数报错 extractvalue()；updatexml()

盲注

布尔注入：返回页面不同。异或注入^、’ or ‘1’=’1、三元 if 语句
时间盲注：界面不更新任何内容，sleep()


堆叠注入：


按查询类型分类
数字型注入、字符型注入、搜索型注入
1搜索型：select * from 表名 where 字段 like &#39;%关键字%&#39;



按提交方式注入分类
GET、POST、Cookie、head头
按sql语句类型分类
insert（增）、delete（删）、update（改）、select（查）

注入检测手法注入前的准备工作（注入点-&gt;输入类型-&gt;回显方式-&gt;未被过滤内容 -&gt;构造闭合）
（1）找到存在注入漏洞的注入点   【搜索栏/登录框/url地址栏/header头】
（2）判断输入类型   【字 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%8F%E6%B4%9E/" title="中间件漏洞">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="中间件漏洞"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%8F%E6%B4%9E/" title="中间件漏洞">中间件漏洞</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Red/">Red</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/">常见web漏洞</a></span></div><div class="content">中间件概述：web容器将其他格式的文件解析为可执行脚本语言，攻击者可以利用这个特征去执行一些攻击行为。
产生条件

命名规则

搭建平台


IISIIS5.x-6.x该类服务器大多为windows server 2003，网站比较古老，开发语句一般为asp;该解析漏洞也只能解析asp文件，而不能解析aspx文件。

目录解析
形式：www.xxx.com/xx.asp/xx.jpg
服务器默认会把.asp目录下的文件都解析成 asp 文件。

文件解析
形式：www.xxx.com/xx.asp;.jpg
服务器默认不解析 ; 号后面的内容，xx.asp;.jpg被解析成asp文件

解析文件类型
IIS 6.0 默认的可执行文件除了asp还包含 :

/test.asa
/test.cer
/test.cdx



IIS6.0 CVE 缓冲区溢出
CVE-2017-7269
PROPFIND 缓冲区栈溢出漏洞导致远程代码随意执行


IIS7.0-IIS7.5畸形漏洞解析漏洞
在默认Fast-CGI开启状态下，在原路径的jpg文件后加上 /xx.php 内容，即访问路径为  xx ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/04/28/hello-world/" title="Hello World">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/28/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-28T07:22:11.871Z" title="发表于 2021-04-28 07:22:11">2021-04-28</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/show/test.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Alexhirchi</div><div class="author-info__description">月亮与六便士</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/05/25/tag/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87/" title="浏览器解析与编码绕过"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="浏览器解析与编码绕过"/></a><div class="content"><a class="title" href="/2021/05/25/tag/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87/" title="浏览器解析与编码绕过">浏览器解析与编码绕过</a><time datetime="2021-05-24T22:00:00.000Z" title="发表于 2021-05-24 22:00:00">2021-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/24/tag/apache%20Tomcat%20%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E(CVE-2020-1938)/" title="apache Tomcat 文件包含漏洞（CVE-2020-1938）"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="apache Tomcat 文件包含漏洞（CVE-2020-1938）"/></a><div class="content"><a class="title" href="/2021/05/24/tag/apache%20Tomcat%20%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E(CVE-2020-1938)/" title="apache Tomcat 文件包含漏洞（CVE-2020-1938）">apache Tomcat 文件包含漏洞（CVE-2020-1938）</a><time datetime="2021-05-23T22:00:00.000Z" title="发表于 2021-05-23 22:00:00">2021-05-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/17/tag/phpmyadmin%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0(CVE-2018-12613)/" title="phpmyadmin文件包含漏洞复现（CVE-2018-12613）"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="phpmyadmin文件包含漏洞复现（CVE-2018-12613）"/></a><div class="content"><a class="title" href="/2021/05/17/tag/phpmyadmin%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0(CVE-2018-12613)/" title="phpmyadmin文件包含漏洞复现（CVE-2018-12613）">phpmyadmin文件包含漏洞复现（CVE-2018-12613）</a><time datetime="2021-05-16T22:00:00.000Z" title="发表于 2021-05-16 22:00:00">2021-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/30/Blue/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="工具使用"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="工具使用"/></a><div class="content"><a class="title" href="/2021/04/30/Blue/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="工具使用">工具使用</a><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" title="命令执行代码执行"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="命令执行代码执行"/></a><div class="content"><a class="title" href="/2021/04/30/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" title="命令执行代码执行">命令执行代码执行</a><time datetime="2021-04-29T18:39:49.000Z" title="发表于 2021-04-29 18:39:49">2021-04-29</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Red/"><span class="card-category-list-name">Red</span><span class="card-category-list-count">5</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Red/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"><span class="card-category-list-name">信息收集</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Red/%E5%B8%B8%E8%A7%81web%E6%BC%8F%E6%B4%9E/"><span class="card-category-list-name">常见web漏洞</span><span class="card-category-list-count">4</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/blue/"><span class="card-category-list-name">blue</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/bypass/" style="font-size: 1.1em; color: #999">bypass</a> <a href="/tags/web%E5%AE%89%E5%85%A8/" style="font-size: 1.5em; color: #99a9bf">web安全</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" style="font-size: 1.1em; color: #999">代码审计</a> <a href="/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" style="font-size: 1.1em; color: #999">信息收集</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" style="font-size: 1.1em; color: #999">工具使用</a> <a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 1.1em; color: #999">文件上传</a> <a href="/tags/%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/" style="font-size: 1.1em; color: #999">日志分析</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" style="font-size: 1.3em; color: #99a1ac">漏洞复现</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">12</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-05-26T08:13:43.884Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Alexhirchi</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>